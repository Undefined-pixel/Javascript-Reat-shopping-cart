{"ast":null,"code":"import _objectSpread from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/d1ade4u/react/git_my/myproject/shopping-cart/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from\"react\";import'./App.css';import CartItems from'./components/CartItems';import CartHeader from'./components/CartHeader';import CartFooter from'./components/CartFooter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],cartItemList:[{id:0,product:{},quantity:0}]};_this.total=0;_this.getTotal=function(cart){/* const total = cart.reduce((pv, cv) => { \n        pv += (parseInt(cv.product.priceInCents) * parseInt(cv.quantity))\n          }, 0);*/var sum=0;for(var i=0;i<cart.length;i++){sum+=parseInt(cart[i].product.priceInCents)*parseInt(cart[i].quantity);}_this.total=sum;};_this.addItemToList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(product){var fetchProduct,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetchProduct={product_id:product.product.id,quantity:product.quantity,id:product.product.id};_context.next=3;return fetch(\"http://localhost:8082/api/items\",{method:'POST',body:JSON.stringify(fetchProduct),headers:{'Content-Type':'application/json','Accept':'application/json'}});case 3:response=_context.sent;_this.setState({cartItemList:[].concat(_toConsumableArray(_this.state.cartItemList),[product])});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var productsResponse,productsJson,itemsResponse,itemsJson;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/products\"));case 2:productsResponse=_context2.sent;_context2.next=5;return productsResponse.json();case 5:productsJson=_context2.sent;_context2.next=8;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/items\"));case 8:itemsResponse=_context2.sent;_context2.next=11;return itemsResponse.json();case 11:itemsJson=_context2.sent;this.setState(_objectSpread(_objectSpread({},this.state),{},{products:productsJson}));itemsJson.map(function(item,i){item.key=i;item.product=productsJson.find(function(product){return product.id===item.product_id;});});this.setState(_objectSpread(_objectSpread({},this.state),{},{cartItemList:itemsJson}));case 15:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CartHeader,{}),/*#__PURE__*/_jsx(CartItems,{products:this.state,addItemToList:this.addItemToList,total:this.total}),/*#__PURE__*/_jsx(CartFooter,{copyright:\"2016\"})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/d1ade4u/react/git_my/myproject/shopping-cart/src/App.js"],"names":["React","Component","CartItems","CartHeader","CartFooter","App","state","products","cartItemList","id","product","quantity","total","getTotal","cart","sum","i","length","parseInt","priceInCents","addItemToList","fetchProduct","product_id","fetch","method","body","JSON","stringify","headers","response","setState","process","env","REACT_APP_API_URL","productsResponse","json","productsJson","itemsResponse","itemsJson","map","item","key","find"],"mappings":"kkCACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,C,2FAIMC,CAAAA,G,+SACJC,K,CAAQ,CACNC,QAAQ,CACN,EAFI,CAKNC,YAAY,CACV,CACE,CAACC,EAAE,CAAE,CAAL,CAAQC,OAAO,CAAC,EAAhB,CAAoBC,QAAQ,CAAE,CAA9B,CADF,CANI,C,OAoCRC,K,CAAQ,C,OAERC,Q,CAAW,SAACC,IAAD,CAAU,CACnB;AACJ;AACA,kBACI,GAAIC,CAAAA,GAAG,CAAG,CAAV,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,IAAI,CAACG,MAAzB,CAAiCD,CAAC,EAAlC,CAAsC,CACpCD,GAAG,EAAIG,QAAQ,CAACJ,IAAI,CAACE,CAAD,CAAJ,CAAQN,OAAR,CAAgBS,YAAjB,CAAR,CAAyCD,QAAQ,CAACJ,IAAI,CAACE,CAAD,CAAJ,CAAQL,QAAT,CAAxD,CAED,CAED,MAAKC,KAAL,CAAaG,GAAb,CAED,C,OAEDK,a,0FAAgB,iBAAOV,OAAP,4IAGRW,YAHQ,CAGO,CACnBC,UAAU,CAAEZ,OAAO,CAACA,OAAR,CAAgBD,EADT,CAEnBE,QAAQ,CAAED,OAAO,CAACC,QAFC,CAGnBF,EAAE,CAAEC,OAAO,CAACA,OAAR,CAAgBD,EAHD,CAHP,uBASQc,CAAAA,KAAK,CAAC,iCAAD,CAAoC,CAC7DC,MAAM,CAAC,MADsD,CAE7DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,YAAf,CAFuD,CAI7DO,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,SAAU,kBAFH,CAJoD,CAApC,CATb,QASTC,QATS,eAmBd,MAAKC,QAAL,CAAc,CACZtB,YAAY,8BAAM,MAAKF,KAAL,CAAWE,YAAjB,GAA+BE,OAA/B,EADA,CAAd,EAnBc,sD,wNAzChB,yNACiCa,CAAAA,KAAK,WAAIQ,OAAO,CAACC,GAAR,CAAYC,iBAAhB,kBADtC,QACQC,gBADR,uCAE6BA,CAAAA,gBAAgB,CAACC,IAAjB,EAF7B,QAEQC,YAFR,uCAG8Bb,CAAAA,KAAK,WAAIQ,OAAO,CAACC,GAAR,CAAYC,iBAAhB,eAHnC,QAGQI,aAHR,wCAI0BA,CAAAA,aAAa,CAACF,IAAd,EAJ1B,SAIQG,SAJR,gBAKE,KAAKR,QAAL,gCACK,KAAKxB,KADV,MAEEC,QAAQ,CAAE6B,YAFZ,IAMAE,SAAS,CAACC,GAAV,CAAc,SAACC,IAAD,CAAOxB,CAAP,CAAa,CACzBwB,IAAI,CAACC,GAAL,CAAWzB,CAAX,CACAwB,IAAI,CAAC9B,OAAL,CAAe0B,YAAY,CAACM,IAAb,CACb,SAAChC,OAAD,QAAaA,CAAAA,OAAO,CAACD,EAAR,GAAe+B,IAAI,CAAClB,UAAjC,EADa,CAAf,CAGD,CALD,EAOA,KAAKQ,QAAL,gCACK,KAAKxB,KADV,MAEEE,YAAY,CAAE8B,SAFhB,IAlBF,8D,mIAkEA,iBAAS,CACP,mBACE,oCACE,KAAC,UAAD,IADF,cAEE,KAAC,SAAD,EAAW,QAAQ,CAAE,KAAKhC,KAA1B,CAAiC,aAAa,CAAE,KAAKc,aAArD,CAAoE,KAAK,CAAE,KAAKR,KAAhF,EAFF,cAGE,KAAC,UAAD,EAAY,SAAS,CAAC,MAAtB,EAHF,GADF,CAQD,C,iBAvFeX,S,EA4FlB,cAAeI,CAAAA,GAAf","sourcesContent":["\nimport React, { Component } from \"react\";\nimport './App.css';\nimport CartItems from './components/CartItems';\nimport CartHeader from './components/CartHeader';\nimport CartFooter from './components/CartFooter';\n\n\n\nclass App extends Component {\n  state = {\n    products:\n      [\n\n      ],\n    cartItemList:\n      [\n        {id: 0, product:{}, quantity: 0}\n      ]\n  }\n\n  async componentDidMount() {\n    const productsResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/products`);\n    const productsJson = await productsResponse.json();\n    const itemsResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/items`);\n    const itemsJson = await itemsResponse.json();\n    this.setState({\n      ...this.state,\n      products: productsJson,\n    });\n    \n\n    itemsJson.map((item, i) => {\n      item.key = i;\n      item.product = productsJson.find(\n        (product) => product.id === item.product_id\n      );\n    });\n\n    this.setState({\n      ...this.state,\n      cartItemList: itemsJson,\n    });\n\n  }\n\n  total = 0;\n\n  getTotal = (cart) => {\n    /* const total = cart.reduce((pv, cv) => { \n        pv += (parseInt(cv.product.priceInCents) * parseInt(cv.quantity))\n          }, 0);*/\n    var sum = 0;\n    for (var i = 0; i < cart.length; i++) {\n      sum += parseInt(cart[i].product.priceInCents) * parseInt(cart[i].quantity)\n\n    }\n\n    this.total = sum;\n\n  }\n\n  addItemToList = async (product) => {\n    \n\n    const fetchProduct = {\n      product_id: product.product.id,\n      quantity: product.quantity,\n      id: product.product.id\n    }\n\n   const response = await fetch(\"http://localhost:8082/api/items\", {\n      method:'POST',\n      body: JSON.stringify(fetchProduct),\n      \n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      }\n    })\n\n    this.setState({\n      cartItemList: [...this.state.cartItemList, product]\n    })\n\n  }\n\n  render() {\n    return (\n      <div>\n        <CartHeader />\n        <CartItems products={this.state} addItemToList={this.addItemToList} total={this.total} />\n        <CartFooter copyright=\"2016\" />\n\n      </div>\n    )\n  };\n\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}